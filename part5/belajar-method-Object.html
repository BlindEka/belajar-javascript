<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>belajar method bawaan Object</title>
    <style>
      * {
        box-sizing: border-box;
      }
    </style>
  </head>
  <body>
    <script>
      let buahDanHarganya = {
        apel: 35e3,
        pisang: 15e3,
        jeruk: 2e4,
        nanas: 23e3,
      };
      // mengembalikan semua nama property dalam bentuk array dari sebuah objek dengan Object.keys()
      let namaBuah = Object.keys(buahDanHarganya);
      namaBuah.forEach(buah => console.log(buah));
      // mengembalikan semua nilai property dalam bentuk array dari sebuah objek dengan Object.values()
      let hargaBuah = Object.values(buahDanHarganya);
      hargaBuah.forEach(buah => console.log(buah));
      // konversi ke object Map
      let mappingBuah = new Map(Object.entries(buahDanHarganya));
      mappingBuah.forEach((harga, nama) => console.log(nama+': '+harga));
      let mappingKeObjek = Object.fromEntries(mappingBuah); // ubah kembali ke objek
      function discount(obj, percentage) {
        return Object.fromEntries(Object.entries(obj).map(([itemName, price]) => [itemName, (percentage ?? 0) >= 100 ? 0 : price * (100 - (percentage ?? 0)) / 100]));
      }
      function sumPrices(obj) {
        let sumPrice = 0;
        for (price of Object.values(obj)) {
          sumPrice += price;
        };
        return sumPrice;
      }
      function propertyLength(obj) {
        return Object.keys(obj).length;
      }
      // mengecek apakah object yang sama
      let obj1 = {id: 1};
      let obj2 = {id: 1};
      console.log('obj1 is obj2 = '+Object.is(obj1, obj2)); // false
      // mencegah penulisan property pada object
      // Object.seal(obj) mencegah menulis property baru ke object
      obj1.name = 'object1'; // bisa menulis property baru
      console.log(`name=${obj1.name},id=${obj1.id},age=${obj1.age}`)
      Object.seal(obj1); // object di segel, sudah tidak bisa menulis property baru 
      Object.isSealed(obj1); // true
      obj1.id = 10;
      obj1.name = 'obj1';
      obj1.age = 18;
      console.log(`name=${obj1.name},id=${obj1.id},age=${obj1.age}`)
      // Object.freeze mencegah penulisan terhadap property baru atau yang sudah ada
      obj2.id = 2;
      obj2.name = 'obj2';
      console.log(`name=${obj2.name},id=${obj2.id},age=${obj2.age}`)
      Object.freeze(obj2); // objek dibekukan, mencegah penulisan property pada objek
      Object.isFrozen(obj2); // true
      Object.isSealed(obj2); // true
      obj2.id = 1;
      obj2.name = 'object2';
      obj2.age = 18;
      console.log(`name=${obj2.name},id=${obj2.id},age=${obj2.age}`)
    </script>
  </body>
</html>